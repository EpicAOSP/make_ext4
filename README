make_ext4
=========

How to create a flashable EXT4 img

From a linux terminal
	git clone https://github.com/EpicAOSP/make_ext4 -b master
	cd make_ext4
	mkdir system
	
Now, on your phone.. from an adb shell or terminal
	tar -c /system/* > /sdcard/factoryfs.tar
	
Then copy the tar file to the make_ext4 directory you have on the pc..
From the linux terminal...
	tar xvf factoryfs.tar -C ./system
	rm factoryfs.tar
	./bin/mkuserimg.sh -s system factoryfs.img ext4 /system 503mb
	
After that you will have a flashable, sparse ext4 image in you directory
called factoryfs.img

To edit it again, from a linux terminal...
	./bin/simg2img factoryfs.img temp.img
	rm factoryfs.img
	sudo losetup /dev/loop0 temp.img
	sudo mount -t ext4 /dev/loop0 ./system
	
Make your changes in the system directory, then... in a linux terminal..
	./bin/mkuserimg.sh -s system factoryfs.img ext4 /system 503mb
	sudo umount ./system
	sudo losetup -d /dev/loop0
	rm temp.img
	
Done..
